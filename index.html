<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portfolio | Mohammed Elmouge</title>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; display: flex; min-height: 100vh; background: #f4f4f4; flex-wrap: wrap; }
    .sidebar { width: 220px; background: #222; color: #fff; display: flex; flex-direction: column; padding: 20px; position: fixed; height: 100%; }
    .sidebar h2 { text-align: center; margin-bottom: 30px; }
    .sidebar a { color: #fff; text-decoration: none; margin: 10px 0; padding: 10px; display: block; border-radius: 5px; transition: background 0.3s; }
    .sidebar a:hover, .sidebar a.active { background: #00adb5; }
    .content { margin-left: 240px; padding: 30px; width: calc(100% - 240px); }
    section { display: none; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); overflow: hidden; }
    section.active { display: block; }
    @keyframes fadeUp { from {opacity: 0; transform: translateY(30px);} to {opacity: 1; transform: translateY(0);} }
    section.animate { animation: fadeUp 0.6s ease-in-out; }
    section img { max-width: 300px; width: 200px; border-radius: 50%; display: inline-block; margin: 20px 0; }
    .project-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; margin-top: 20px; }
    .project-item { background: #fafafa; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .project-item h3 { margin-top: 0; }
    .project-item a { display: inline-block; margin-top: 10px; text-decoration: none; font-weight: bold; width: 100px; text-align: center; color: #fff; background-color: #00adb5; padding: 5px; border-radius: 5px; }
    #add-project { display: none; background: #eee; border-radius: 5px; width: 100%; min-height: 100vh; padding: 20px; }
    #add-project input, #add-project textarea { display:block; width: 90%; margin: 10px auto; padding: 10px; border-radius: 5px; border: 1px solid #ccc; }
    @media (max-width: 768px) { body { flex-direction: column; } .sidebar { position: relative; width: 100%; height: auto; flex-direction: row; justify-content: space-around; } .sidebar img { display: none; } .sidebar h2 { display: none; } .content { margin-left: 0; width: 100%; padding: 15px; } }
    @media (max-width: 480px) { .project-list { grid-template-columns: 1fr; } }
    #edit{ display:none; padding:20px; background:#eee; width:100%; min-height:100vh; }
    #login-box{padding:20px; background:#eee;display: none;}
  </style>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>

  <script>
    // إعداد Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyAAkv2yTZt0krxBcMio1o6je9MGjWZq_84",
      authDomain: "portfoiluo.firebaseapp.com",
      databaseURL: "https://portfoiluo-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "portfoiluo",
      storageBucket: "portfoiluo.appspot.com",
      messagingSenderId: "273679929614",
      appId: "1:273679929614:web:d814f9505dfcfd331c075f",
      measurementId: "G-JBETZWF927"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const auth = firebase.auth();

    // الإيميل الوحيد المسموح يضيف/يحذف
    const adminEmail = "jakjak200018@gmail.com";

    // تسجيل الدخول بجوجل
    function loginGoogle(){
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider)
      .then(result => {
        const user = result.user;
        if(user.email === adminEmail){
          alert("Welcome Admin ✅");
          document.getElementById("login-box").style.display="none";
          document.getElementById("main").style.display="block";
        }else{
          alert("You are not authorized ❌");
          auth.signOut();
        }
      })
      .catch(err => alert(err.message));
    }

    // عرض المشاريع
    function renderProjects(){
      const container = document.querySelector(".project-list");
      container.innerHTML = "";
      db.ref("projects").on("value", snapshot => {
        container.innerHTML = "";
        let i = 1;
        snapshot.forEach(child => {
          let proj = child.val();
          let div = document.createElement("div");
          div.className = "project-item";
          div.innerHTML = `
            <h3>${i}. ${proj.name}</h3>
            <p>${proj.description}</p>
            <a href="${proj.link}" target="_blank">View</a>
          `;
          container.appendChild(div);
          i++;
        });
      });
    }

    // التنقل بين الأقسام
    window.onload = function() {
      const links = document.querySelectorAll('.nav-link');
      let active = { link: document.querySelector('.nav-link.active'), section: document.querySelector('section.active') };
      links.forEach(link => {
        link.addEventListener('click', e => {
          e.preventDefault();
          active.link.classList.remove('active');
          active.section.classList.remove('active', 'animate');
          const targetId = link.dataset.target;
          active = { link: link, section: document.getElementById(targetId) };
          link.classList.add('active');
          active.section.classList.add('active', 'animate');
        });
      });
      renderProjects();
    };

    // عمليات الكيبورد (add / save / delete)
    var operation = "";
    document.addEventListener("keydown",function(e){
      operation += e.key;

      if(operation.includes("add")){
        
        if(auth.currentUser && auth.currentUser.email === adminEmail){
          document.getElementById("main").style.display="none";
          document.getElementById("add-project").style.display="block";
        } else {
          alert("Not Authorized ❌");
        }
        operation="";
      }else if(operation.includes("log")){
        loginGoogle();
        operation="";
      }
      else if(operation.includes("save")){
        if(auth.currentUser && auth.currentUser.email === adminEmail){
          let name = document.getElementById("project-name").value;
          let description = document.getElementById("project-description").value;
          let link = document.getElementById("project-link").value;
          if(name && description && link){
            db.ref("projects").push({name, description, link});
            alert("Saved ✅");
            location.reload();
          }
        } else {
          alert("Not Authorized ❌");
        }
        operation="";
      }
      else if(operation.includes("delete")){
        if(auth.currentUser && auth.currentUser.email === adminEmail){
          let id = prompt("Enter Firebase project ID to delete:");
          if(id){
            db.ref("projects/"+id).remove();
            alert("Deleted ❌");
          }
        } else {
          alert("Not Authorized ❌");
        }
        operation="";
      }
    });
  </script>
</head>
<body>
  <!-- شاشة تسجيل الدخول -->
  <div id="login-box">
    <h2>Login</h2>
    <button onclick="loginGoogle()">Login with Google</button>
  </div>

  <!-- المحتوى الأساسي -->
  <div id="main" >
    <div class="sidebar">
      <h2>Portfolio</h2>
      <img src="l.jpg" alt="Mohammed Elmouge">
      <a href="#" class="nav-link active" data-target="about">About</a>
      <a href="#" class="nav-link" data-target="CV">CV</a>
      <a href="#" class="nav-link" data-target="projects">Projects</a>
      <a href="#" class="nav-link" data-target="contact">Contact</a>
    </div>

    <div class="content">
      <section id="about" class="active">
        <h1>Mohammed Elmouge</h1>
        <img src="l.jpg" alt="Mohammed Elmouge">
        <p>My name is <strong>Mohammed Elmouge</strong>. I'm a student at Mansoura University. I want to be a backend developer.</p>
      </section>

      <section id="CV">
        <h2>CV</h2>
        <h3>Education</h3>
        <ul><li>Bachelor in Computer Science – Mansoura University</li></ul>
        <h3>Skills</h3>
        <ul>
          <li>Python, Django, Flask</li>
          <li>Node.js, Express</li>
          <li>Databases: MySQL, MongoDB</li>
        </ul>
      </section>

      <section id="projects">
        <h2>Projects</h2>
        <div class="project-list"></div>
      </section>

      <section id="contact">
        <h2>Contact</h2>
        <p>Email: jakjak200018@email.com</p>
        <p>Phone: +20 155 6123 991</p>
      </section>
    </div>
  </div>

  <!-- إضافة مشروع -->
  <div id="add-project">
    <input type="text" id="project-name" placeholder="Project Name">
    <textarea id="project-description" placeholder="Project Description"></textarea>
    <input type="url" id="project-link" placeholder="Project Link">
  </div>

  <!-- تعديل -->
  <div id="edit">
    <h1 id="Name-section"></h1>
    <div id="element-of-section"></div>
    <button>Save</button>
  </div>
</body>
</html>
